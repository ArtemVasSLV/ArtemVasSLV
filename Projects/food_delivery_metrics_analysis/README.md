# Расчёт метрик сервиса доставки еды

## Описание проекта
Сервису доставки еды «Всё.из.кафе» потребовалась срочная аналитическая помощь. Задача — подготовить данные и рассчитать ключевые метрики для бизнеса в городе Саранске за период с 1 мая по 30 июня 2021 года. На основе расчётов составлен аналитический отчёт с выводами и рекомендациями.

**Задачи исследования:**
- Подготовить SQL-запросы для расчёта ключевых метрик
- Выполнить расчёт метрик в DataLens
- Проанализировать результаты и подготовить аналитическую записку с визуализациями

## Метрики для расчёта
- **DAU** (Daily Active Users) — количество активных пользователей за день
- **Conversion Rate** — коэффициент конверсии
- **Средний чек** — средняя сумма покупки на пользователя
- **LTV** (Lifetime Value) — совокупная ценность клиента за период
- **Retention Rate** — коэффициент удержания пользователей
- Топ-3 ресторана по LTV
- Топ-5 блюд по LTV

## Набор данных
Данные продукта «Всё.из.кафе» состоят из нескольких таблиц в схеме `rest_analytics`:

**`analytics_events`** — журнал событий:
- `visitor_uuid`, `user_id`, `device_type`, `city_id`, `age`, `source`
- `first_date`, `visit_id`, `event`, `datetime`, `log_date`
- `rest_id`, `object_id`, `order_id`, `revenue`, `delivery`, `commission`

**`advertisement_budgets`** — рекламные затраты: `source`, `date`, `budget`

**`partners`** — справочник ресторанов: `rest_id`, `chain`, `type`, `city_id`, `commission`

**`dishes`** — справочник блюд: `object_id`, `name`, `spicy`, `fish`, `meat`, `rest_id`

**`cities`** — справочник городов: `city_id`, `city_name`

## Используемые инструменты
- **SQL** (PostgreSQL) — написание запросов для расчёта метрик
- **Yandex DataLens** — визуализация данных
- **Аналитические методы** — когортный анализ, расчёт retention, LTV

## SQL-запросы
Все SQL-запросы для расчёта метрик находятся в файле `queries.sql`:
- DAU (ежедневная активность пользователей)
- Conversion Rate (коэффициент конверсии)
- Средний чек (помесячно)
- Топ-3 ресторана по LTV
- Топ-5 блюд по LTV
- Retention Rate (когортный анализ)

## Ключевые результаты

| Метрика | Значение |
|---------|----------|
| **DAU (максимум)** | 85 пользователей (4 мая) |
| **DAU (минимум)** | 17 пользователей (16 мая) |
| **Conversion Rate (максимум)** | 43% |
| **Conversion Rate (минимум)** | 18% (18 июня) |
| **Средний чек (май)** | 135.88 руб. |
| **Средний чек (июнь)** | 147.66 руб. |
| **Retention Rate (1-й день)** | 14% |
| **Retention Rate (7-й день)** | 4% |

### Топ-3 ресторана по LTV
1. **Гурманское Наслаждение** — 170 479 руб.
2. **Гастрономический Шторм** — 161 090 руб.
3. **Шоколадный Рай** — 61 199 руб.

### Топ-5 блюд по LTV
Все топовые блюда — из ресторанов-лидеров, преимущественно мясные и рыбные, неострые (кроме морских ежей).

## Выводы и рекомендации

### Основные выводы:
1. Активность пользователей сильно колеблется, с пиками в праздничные дни (4 мая — максимум)
2. Конверсия нестабильна (от 18% до 43%), требует анализа причин резких падений
3. Средний чек вырос в июне на 8.7% за счёт увеличения комиссии
4. Удержание пользователей критически низкое (только 4% возвращаются через неделю)
5. Доход сильно зависит от двух ресторанов-лидеров (более 70% от топ-3)

### Рекомендации:

**По DAU:**
- Провести рекламные акции в периоды низкой активности
- Изучить причины спада активности в выходные

**По конверсии:**
- Проверить технические проблемы в дни падений (4, 18, 28 июня)
- Проанализировать внешние факторы, влияющие на конверсию

**По среднему чеку:**
- Продолжить мониторинг динамики
- Если рост комиссии не снижает число заказов — стратегия верна

**По удержанию:**
- Внедрить программу лояльности (бонусы за повторные заказы)
- Упростить первый заказ (улучшить onboarding)
- Настроить push-уведомления с персонализированными предложениями

**По работе с ресторанами:**
- Делиться данными о топовых блюдах
- Мотивировать другие рестораны участвовать в акциях
- Изучить успешные практики лидеров и тиражировать их

## Файлы
- `README.md` — описание проекта
- `queries.sql` — SQL-запросы для расчёта метрик
- `analytical_report.md` — аналитическая записка с выводами и скриншотами визуализаций
