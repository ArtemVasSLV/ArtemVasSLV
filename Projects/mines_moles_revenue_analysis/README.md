# Анализ причин падения выручки в игре Mines & Moles

## Описание проекта
Мобильная игра Mines & Moles (жанр rogue-like) столкнулась с проблемой: после активного роста в начале 2024 года, с июля начала фиксироваться стагнация, а затем и снижение выручки от месяца к месяцу. Технических проблем не фиксировалось, но летом произошли изменения в пользовательском опыте: редизайн внутриигрового магазина и корректировка алгоритма генерации уровней.

**Цель исследования:** Определить причину падения выручки, выявить проблемные метрики и сформулировать выводы для команды продукта.

## Навыки и инструменты
- **SQL:** предобработка данных, подготовка датасета для анализа
- **Python:** Pandas, Matplotlib, Seaborn — расчёт и визуализация метрик
- **Продуктовые метрики:** MAU, Retention Rate, ARPAU, AOV, конверсия в покупку, доля пройденных уровней

## Структура данных

**Таблица `users`** — информация о пользователях:
- `device_id` — идентификатор устройства
- `user_id` — идентификатор зарегистрированного пользователя
- `install_time` — дата и время установки
- `country_code` — код страны
- `platform` — iOS или Android
- `traffic_type` — organic, paid, referral

**Таблица `events`** — события пользователей:
- `device_id`, `session_id`, `time`, `event_name` (app_start, store_open, item_add_to_cart, checkout_load, order_completed и др.)

**Таблица `game_sessions`** — прохождение уровней:
- `device_id`, `session_id`, `level_id`, `time_start`, `time_end`, `success_fact`, `duration_sec`

**Таблица `transactions`** — транзакции в магазине:
- `device_id`, `session_id`, `transaction_id`, `time`, `payment_type`, `item_name`, `price`, `status`

---

## Дерево метрик и гипотезы

### Дерево метрик
<img width="4323" height="2100" alt="2 7 1_1_1741702625" src="https://github.com/user-attachments/assets/92d699fa-901e-44d1-96ae-c7893d810400" />


### Сформулированные гипотезы

**Падение активной базы пользователей:**
1. Ухудшилась стратегия привлечения новых пользователей
2. Опыт текущих пользователей в игре ухудшается (снижение удержания)

**Падение среднего дохода на активного пользователя (ARPAU):**
3. Пользователи стали покупать меньше товаров или более дешёвые товары
4. Пользователи стали менее активно совершать покупки (снижение конверсии)

### Метрики для проверки гипотез

| Гипотеза | Метрики для проверки |
|----------|----------------------|
| Ухудшение привлечения | Количество новых пользователей по каналам (organic, paid, referral) |
| Ухудшение опыта | Retention Rate по когортам, средняя доля пройденных уровней на сессию |
| Изменение структуры покупок | Средняя цена предметов, среднее количество предметов в заказе |
| Снижение активности покупок | Конверсия в покупку (воронка), доля пользователей с >10 уровнями |

---

## Результаты анализа метрик

### 1. Общий MAU
**Интерпретация:** MAU демонстрирует устойчивый рост с января по август 2024 года, после чего начинается снижение. Пик активности пришёлся на август, затем последовало падение, что коррелирует с общей динамикой выручки.

### 2. MAU по платформам
**Интерпретация:** Обе платформы (iOS и Android) показывают схожую динамику: рост до августа и последующее снижение. Android традиционно лидирует по количеству пользователей. Падение синхронно на обеих платформах, что исключает проблемы, связанные с одной из ОС.

### 3. Новые пользователи по каналам привлечения
**Интерпретация:** Количество новых пользователей из органического и реферального каналов остаётся стабильным на протяжении всего периода. Платный трафик показывает небольшой рост. **Гипотеза об ухудшении привлечения НЕ ПОДТВЕРЖДАЕТСЯ** — новых пользователей приходит не меньше.

### 4. Retention Rate по когортам
**Интерпретация:** Наблюдается ухудшение удержания пользователей в более поздних когортах. Если в январе-марте retention на 2-й месяц составлял 11-12%, то в августе-сентябре он упал до 8-9%. **Гипотеза об ухудшении опыта пользователей ПОДТВЕРЖДАЕТСЯ** — пользователи стали хуже возвращаться в игру.

### 5. Средняя доля пройденных уровней на сессию
**Интерпретация:** Метрика стабильно росла до июня (с 35% до 46%), после чего началось резкое падение. К концу года доля успешных прохождений снизилась до 30%. Это прямо указывает на ухудшение пользовательского опыта — игроки хуже справляются с уровнями. **Гипотеза об ухудшении опыта ПОДТВЕРЖДАЕТСЯ.**

### 6. ARPAU (средний доход на активного пользователя)
**Интерпретация:** ARPAU демонстрирует устойчивый рост с января по июль, после чего начинается снижение. Пик пришёлся на июль, затем метрика пошла вниз. Это подтверждает, что падение выручки связано не только с уменьшением активной базы, но и со снижением дохода с каждого пользователя.

### 7. Воронка конверсии в покупку
**Интерпретация:** Конверсия на всех этапах воронки (открытие магазина → добавление в корзину → открытие чекаута → завершение заказа) снижается, начиная с июля. Особенно заметно падение на этапе "открытие чекаута" и "завершение заказа". **Гипотеза о снижении активности покупок ПОДТВЕРЖДАЕТСЯ.**

### 8. Средняя цена предметов в заказе
**Интерпретация:** Средняя цена предметов остаётся стабильной на протяжении всего периода (колебания в пределах 2.8-3.2$). Значительных изменений не наблюдается. **Гипотеза о переходе на более дешёвые товары НЕ ПОДТВЕРЖДАЕТСЯ.**

### 9. Среднее количество предметов в заказе
**Интерпретация:** Количество предметов в заказе демонстрирует лёгкий восходящий тренд до августа, после чего начинается небольшое снижение. Однако изменения незначительны (в пределах 1.9-2.1 предмета). **Гипотеза об уменьшении количества товаров НЕ ПОДТВЕРЖДАЕТСЯ.**

### 10. Средний чек (AOV)
**Интерпретация:** AOV, как производная от средней цены и среднего количества, также остаётся стабильным (5.5-6.5$). Значительных изменений не наблюдается. Падение выручки НЕ связано со снижением среднего чека.

### 11. Доля пользователей, прошедших более 10 уровней
**Интерпретация:** Метрика стабильно росла до августа, достигнув 42%, после чего началось резкое падение. К декабрю доля пользователей, преодолевших рубеж в 10 уровней, снизилась до 32%. Это критически важно, так как маркетинговые исследования показали, что пользователи начинают активно покупать именно после прохождения 10 уровней. **Гипотеза о связи с конверсией ПОДТВЕРЖДАЕТСЯ.**

---

## Итоговые выводы

### Что произошло в продукте?
В продукте произошло одновременное ухудшение двух ключевых факторов: пользовательского опыта и, как следствие, монетизации.

### В каких метриках это проявилось?

**Ухудшение опыта пользователей:**
- Снижение Retention Rate в более поздних когортах (с 11-12% до 8-9%)
- Падение доли успешно пройденных уровней с 46% до 30%
- Снижение доли пользователей, прошедших более 10 уровней (с 42% до 32%)

**Ухудшение монетизации:**
- Снижение ARPAU после июля
- Падение конверсии на всех этапах воронки покупки
- Снижение общего MAU после августа

### По какой причине это произошло?

Основная причина — **изменения в пользовательском опыте**, произошедшие летом 2024 года:

1. **Корректировка алгоритма генерации уровней** привела к тому, что проходить уровни стало сложнее (падение доли успешных прохождений). Игроки стали чаще "застревать" на уровнях, не доходя до ключевого рубежа в 10 уровней, после которого обычно начинаются активные покупки.

2. **Редизайн внутриигрового магазина** негативно повлиял на конверсию в покупку — пользователи стали реже открывать магазин, добавлять товары в корзину и завершать заказы.

### Что НЕ является причиной?
- Количество новых пользователей не снижалось (привлечение работает хорошо)
- Средний чек и его компоненты (цена предметов, количество в заказе) остались стабильны
- Проблемы не связаны с конкретной платформой (iOS/Android показывают одинаковую динамику)

---

## Рекомендации

1. **Вернуться к предыдущему алгоритму генерации уровней** или доработать текущий, чтобы восстановить комфортный для пользователей уровень сложности (целевое значение доли успешных прохождений — не ниже 45%).

2. **Проанализировать изменения в магазине**, выявить проблемные места (возможно, кнопки стали менее заметны, увеличилось количество шагов до покупки, изменилась логика рекомендаций).

3. **Провести A/B-тест** двух версий магазина: текущей и предыдущей, чтобы количественно оценить влияние редизайна на конверсию.

4. **Сфокусироваться на удержании** — запустить программы лояльности для пользователей, которые прошли 5-9 уровней, стимулируя их дойти до "целевых" 10 уровней.

5. **Мониторить метрику доли пользователей с >10 уровнями** как ключевой индикатор здоровья продукта, влияющий на монетизацию.

---

## Файлы
- `README.md` — описание проекта
- `analytical_report` — аналитическая записка с выводами и графиками

*Примечание: все расчеты выполнены в Python, визуализации и выводы представлены в аналитической записке.*
