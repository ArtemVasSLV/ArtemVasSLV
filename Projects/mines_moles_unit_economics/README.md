# Анализ юнит-экономики мобильной игры Mines & Moles

## Описание проекта
Проект выполнен для мобильной игры Mines & Moles. Цель — провести расчёт и анализ ключевых метрик юнит-экономики: LTV, CAC, ROI, Payback Period, ARPPU и Retention Rate. На основе анализа необходимо оценить текущее состояние юнит-экономики приложения и сформулировать рекомендации по оптимизации маркетинговых затрат.

**Задачи исследования:**
- Подготовить и агрегировать данные о пользователях, событиях, транзакциях и маркетинговых затратах
- Провести когортный анализ LTV в разрезе источников трафика
- Рассчитать стоимость привлечения клиента (CAC) и проанализировать её динамику
- Определить период окупаемости (Payback Period) для платного трафика
- Рассчитать окупаемость инвестиций (ROI) и визуализировать её динамику
- Проанализировать ARPPU и Retention Rate для платящих пользователей
- Сформулировать выводы и рекомендации для бизнеса

## Навыки и инструменты
- **Python:** Pandas, NumPy — обработка и анализ данных
- **Визуализация:** Matplotlib, Seaborn
- **Продуктовые метрики:** LTV, CAC, ROI, Payback Period, ARPPU, Retention Rate
- **Когортный анализ:** группировка по месяцам первой активности

## Набор данных

### `тут_была_ссылка` — информация о пользователях
- `device_id` — уникальный ID устройства
- `install_time` — дата и время установки игры
- `country_code` — код страны (например, RU, AZ)
- `traffic_type` — тип трафика (paid, organic)
- `platform` — ОС устройства (ios, android)
- `source` — источник привлечения
- `campaign` — название рекламной кампании
- `user_id` — уникальный ID пользователя

### `тут_была_ссылка` — события пользователей в игре
- `device_id` — ID устройства
- `session_id` — ID сессии
- `time` — дата и время события
- `event_name` — событие запуска игры

### `тут_была_ссылка` — данные о транзакциях
- `device_id` — уникальный идентификатор устройства
- `session_id` — идентификатор игровой сессии
- `transaction_id` — уникальный ID транзакции
- `time` — дата и время покупки
- `payment_type` — способ оплаты (bank_card, paypal, game_wallet)
- `item_name` — название товара (например, chest_1, coin_pack_2)
- `price` — стоимость товара
- `status` — статус транзакции (success, failed)

### `тут_была_ссылка` — затраты на маркетинг
- `month` — месяц в формате YYYY-MM
- `source` — рекламный источник (например, google, yandex, youtube)
- `traffic_type` — тип трафика (paid, organic, referral)
- `marketing_costs` — затраты на маркетинг

---

## Ход выполнения проекта

### Часть 1. Подготовка данных

#### Задача 1. Загрузка данных
Загружены три датафрейма:
- `df_users` — 98 305 строк, 8 столбцов
- `df_events` — 3 791 696 строк, 4 столбца
- `df_transactions` — 280 650 строк, 9 столбцов

#### Задача 2. Агрегация данных событий
Создан датафрейм `df_monthly_events` с колонками:
- `device_id`, `activity_month`, `first_activity_month`, `session_id`

#### Задача 3. Расчёт месячной выручки
Создан датафрейм `df_monthly_transactions` с колонками:
- `device_id`, `activity_month`, `total_revenue`

#### Задача 4. Создание основного датафрейма
Объединены данные о событиях, транзакциях и атрибутах пользователей. Добавлена колонка `n_period` — количество месяцев с первого запуска. Удалён последний неполный месяц.

Итоговый размер: **302 835 строк**, колонки:
- `device_id`, `activity_month`, `first_activity_month`, `total_revenue`, `n_period`, `traffic_type`, `source`

---

### Часть 2. Когортный анализ LTV

#### Задача 5. Расчёт накопленного LTV
Рассчитан LTV как кумулятивная сумма выручки для каждого пользователя. Создан датафрейм `df_grouped_ltv` со средними значениями LTV по когортам, периодам и типам трафика.

#### Задача 6. Анализ среднего LTV
Построены графики динамики LTV для когорт 2024-01, 2024-04, 2024-06, 2024-09 в разрезе трёх источников трафика:

**Результаты:**
- **Organic трафик:** стабильный LTV без существенных изменений
- **Referral трафик:** небольшие различия между когортами первой и второй половины года
- **Paid трафик:** наиболее выраженный рост LTV во второй половине года

#### Задача 7. Тепловые карты LTV
Построены тепловые карты для referral и paid трафика:
- **Referral:** стабильная динамика без резких изменений
- **Paid:** заметный рост LTV в поздних когортах

---

### Часть 3. Расчёт CAC

#### Задача 8. Визуализация маркетинговых затрат
Построен график динамики маркетинговых затрат по месяцам:
- Рост затрат на платный трафик с июня (в 1.5–2 раза)

#### Задача 9. Расчёт CAC
Рассчитана стоимость привлечения клиента для каждой когорты и источника трафика. Добавлена колонка `CAC` в основной датафрейм.

#### Задача 10. Визуализация динамики CAC
Построен график среднего CAC по типам трафика:
- **Organic:** CAC = 0 (бесплатный трафик)
- **Referral:** стабилен на протяжении года
- **Paid:** рост более чем в 1.5 раза со второй половины года

---

### Часть 4. Расчёт Payback Period

#### Задача 11. Подготовка данных
Создан датафрейм `cac_ltv_grouped` со средними LTV и CAC для платного трафика.

#### Задача 12. Визуализация LTV и CAC
Построен график динамики LTV и CAC для четырёх когорт:

| Когорта | CAC | Период окупаемости |
|---------|-----|-------------------|
| 2024-01 | ~80 | 4 месяца |
| 2024-03 | ~85 | 4.5 месяца |
| 2024-06 | ~120 | 5 месяцев |
| 2024-08 | ~140 | 5.5 месяца |

**Вывод:** рост CAC во второй половине года привёл к незначительному увеличению периода окупаемости (на 1–1.5 месяца).

---

### Часть 5. Расчёт ROI

#### Задача 13. Визуализация ROI для когорт
Рассчитан ROI для каждой когорты и периода. Построены линейные графики:
- Все когорты достигают окупаемости (ROI > 0) к 5–6 месяцу
- Различия в динамике ROI между когортами минимальны

#### Задача 14. Тепловая карта ROI
Построена тепловая карта ROI для всех когорт платного трафика:
- Значения ROI варьируются от -100% до +100%
- Наибольшая рентабельность достигается к 5–6 месяцу
- Поздние когорты показывают схожую динамику с ранними

**Вывод:** несмотря на рост CAC, ускоренный рост LTV компенсирует затраты, сохраняя ROI на стабильном уровне.

---

### Часть 6. Расчёт ARPPU и Retention Rate

#### Задача 15. Расчёт и визуализация ARPPU
Рассчитан ARPPU (средний доход с платящего пользователя) для платного трафика:

| Когорта | ARPPU (3 месяц) |
|---------|-----------------|
| 2024-01 | 180 |
| 2024-03 | 185 |
| 2024-06 | 200 |
| 2024-08 | 210 |

**Вывод:** ARPPU демонстрирует положительную динамику — платящие пользователи поздних когорт тратят больше.

#### Задача 16. Расчёт и визуализация Retention Rate
Рассчитан Retention Rate для платного трафика:

| Когорта | 1 месяц | 3 месяц | 6 месяц |
|---------|---------|---------|---------|
| 2024-01 | 100% | 28% | 15% |
| 2024-03 | 100% | 27% | 14% |
| 2024-06 | 100% | 26% | 13% |
| 2024-08 | 100% | 25% | 12% |

**Вывод:** Retention Rate остаётся стабильным на протяжении года, без существенных изменений.

---

## Итоговые выводы

### Динамика ключевых метрик

| Метрика | Изменение во второй половине года |
|---------|-----------------------------------|
| **LTV** | Положительное (рост) |
| **CAC** | Негативное (рост) |
| **Payback Period** | Практически без изменений |
| **ROI** | Практически без изменений |
| **ARPPU** | Положительное (рост) |
| **Retention** | Практически без изменений |

### Что произошло в продукте?
1. **Рост маркетинговых затрат** на платный трафик во второй половине года привёл к увеличению CAC в 1.5–2 раза.
2. **Одновременный рост LTV** компенсировал увеличение стоимости привлечения.
3. **Период окупаемости** незначительно увеличился (с 4 до 5.5 месяцев), но остаётся в приемлемых пределах.
4. **ROI сохранил стабильность** — ускоренный рост LTV нивелировал рост затрат.
5. **ARPPU вырос** — платящие пользователи стали тратить больше.
6. **Retention Rate стабилен** — удержание пользователей не ухудшилось.

### Рекомендация бизнесу
**Продолжить инвестиции в платный трафик, но оптимизировать таргетинг для привлечения более ценной аудитории и снижения CAC.**

Обоснование:
- Стабильный ROI подтверждает текущую окупаемость инвестиций
- Рост LTV позволяет масштабироваться при условии контроля за затратами
- Оптимизация CAC повысит маржинальность без потери качества трафика

---

## Файлы
- `README.md` — описание проекта
- `analysis.ipynb` — Jupyter Notebook с полным кодом и визуализациями
